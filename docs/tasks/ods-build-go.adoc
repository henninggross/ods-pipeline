// Document generated by internal/documentation/tasks.go from template.adoc.tmpl; DO NOT EDIT.

= ods-build-go

Builds Go (module) applications.

The following steps are executed:

- check proper formatting against gofmt
- linting using golangci-lint
- build (using `go-os` and `go-arch` parameters)
- test execution

Tests exclude the vendor directory. Test results are converted into xUnit format.

Both xUnit report and coverage report are placed into .ods/artifacts.

The built binary is named `app` and placed into the directory specified by `output-dir`.

After tests ran successfully, the application source code is scanned by SonarQube.
When `sonar-quality-gate` is set to `true`, the task will fail if the quality gate
is not passed. If SonarQube is not desired, it can be disabled via `sonar-skip`.
The SonarQube scan will include parameters to perform a pull request analysis if
there is an open pull request for the branch being built. Pull request decoration
in Bitbucket is done automatically by SonarQube provided the ALM integration is setup
properly in SonarQube.


== Parameters

[cols="1,1,2"]
|===
| Parameter | Default | Description

| working-dir
| .
| Working directory. The path must be relative to the root of the repository,
without leading `./` and trailing `/`.



| enable-cgo
| false
| Whether to enable CGO. When not enabled the build will set `CGO_ENABLED=0`.


| go-os
| linux
| `GOOS` variable (the execution operating system such as `linux`, `windows`).


| go-arch
| amd64
| `GOARCH` variable (the execution architecture such as `arm`, `amd64`).


| output-dir
| docker
| Path to the directory into which the resulting Go binary should be copied, relative to `working-dir`. This directory may then later be used as Docker context for example.


| pre-test-script
| 
| Script to execute before running tests, relative to the working directory.


| sonar-quality-gate
| false
| Whether the SonarQube quality gate needs to pass for the task to succeed.


| sonar-skip
| false
| Whether to skip SonarQube analysis or not.

|===

== Results

N/A
